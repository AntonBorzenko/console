{"version":3,"sources":["../src/clock_ctrl.js"],"names":["PanelCtrl","moment","_","panelDefaults","SVGCtrl","$scope","$injector","defaultsDeep","panel","readTextFile","file","rawFile","XMLHttpRequest","allText","open","onreadystatechange","alert","status","readyState","responseText","send","jsonContent","data","result","svg","document","createElement","setAttribute","doForEachMetrics","metrics","values","startTime","x","y","doForEachValuePair","value","push","forEach","polyline","appendChild","pts","i","length","toString","outerHTML","addEditorTab","$timeout","cancel","nextTickPromise","templateUrl"],"mappings":"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","file":"clock_ctrl.js","sourcesContent":["import {PanelCtrl} from 'app/plugins/sdk';\nimport moment from 'moment';\nimport './external/moment-duration-format';\nimport _ from 'lodash';\nimport './css/clock-panel.css!';\n\nconst panelDefaults = {};\n\nexport class SVGCtrl extends PanelCtrl {\n  constructor($scope, $injector) {\n      super($scope, $injector);\n      _.defaultsDeep(this.panel, panelDefaults);\n            \n      function readTextFile(file)\n      {\n\t  var rawFile = new XMLHttpRequest();\n\t  var allText = null;\n\t  rawFile.open(\"GET\", file, false);\n\t  rawFile.onreadystatechange = function ()\n\t  {\n\t      alert(rawFile.status);\n              if(rawFile.readyState === 4)\n              {\n\t\t  if(rawFile.status === 200 || rawFile.status == 0)\n\t\t  {\n                      allText = rawFile.responseText;\n\t\t  }\n              }\n\t  }\n\t  rawFile.send(null);\n\t  return allText;\n      }\n      \n      var jsonContent = {\"status\":\"success\",\"data\":{\"resultType\":\"matrix\",\"result\":[{\"metric\":{\"__name__\":\"prometheus_http_response_size_bytes_bucket\",\"handler\":\"/label/:name/values\",\"instance\":\"localhost:9090\",\"job\":\"prometheus\",\"le\":\"+Inf\"},\"values\":[[1539529920,\"1\"],[1539530640,\"1\"],[1539531000,\"2\"]]},{\"metric\":{\"__name__\":\"prometheus_http_response_size_bytes_bucket\",\"handler\":\"/label/:name/values\",\"instance\":\"localhost:9090\",\"job\":\"prometheus\",\"le\":\"100\"},\"values\":[[1539529920,\"0\"],[1539530640,\"0\"],[1539531000,\"0\"]]}]}};\n      \n      var data = jsonContent['data'];\n      var result = data['result'];\n      \n      var svg = document.createElement(\"svg\");\n      \n      svg.setAttribute(\"width\", 200);\n      svg.setAttribute(\"height\", 200);\n      \n      function doForEachMetrics(metrics) {\n\t  var values = metrics['values'];\n\t  var startTime = values[0][0];\n\t  \n\t  var x = [];\n\t  var y = [];\n\t  \n\t  function doForEachValuePair(value) {\n              x.push(value[0] - startTime);\n              y.push(value[1]);\n\t  }\n\t  \n\t  values.forEach(doForEachValuePair);\n\t  \n\t  var polyline = document.createElement(\"polyline\");\n\t  svg.appendChild(polyline);\n\t  \n\t  var pts = \"\";\n\t  for (var i = 0; i < x.length; ++i) {\n              pts += x[i].toString() + \",\";\n              pts += y[i].toString() + \" \";\n\t  }\n\t  polyline.setAttribute(\"points\", pts);\n\t  \n\t  polyline.setAttribute(\"style\", \"fill:none;stroke:black;stroke-width:3\");\n      }\n      \n      result.forEach(doForEachMetrics);\n      this.svg = svg.outerHTML.toString();\n      \n  }\n    \n    onInitEditMode() {\n\tthis.addEditorTab('Options', 'public/plugins/grafana-svg-panel/editor.html', 2);\n    }\n\n    onPanelTeardown() {\n\tthis.$timeout.cancel(this.nextTickPromise);\n    }\n    \n}\n\nSVGCtrl.templateUrl = 'module.html';\n"]}